!function(){"use strict";var e=angular.module("jobFinder.app",["ui.router","ngAnimate","satellizer","common.service","ui.bootstrap"]);e.config(["$urlRouterProvider","$stateProvider","$authProvider",function(e,t,o){e.otherwise("/"),t.state("register",{url:"/register",templateUrl:"/app/views/register.html",controller:"RegisterCtrl"}).state("main",{url:"/",templateUrl:"/app/views/main.html",controller:"MainCtrl"}).state("logout",{url:"/logout",controller:"LogoutCtrl"}).state("jobs",{url:"/jobs",templateUrl:"/app/views/jobs.html",controller:"JobsCtrl",resolve:{jobService:"jobService",jobs:function(e){return e.title.query({}).$promise}}}).state("login",{url:"/login",templateUrl:"/app/views/login.html",controller:"LoginCtrl"}).state("userProfile",{url:"/userProfile",templateUrl:"/app/views/userProfile.html",controller:"ProfileCtrl",controllerAs:"vm",resolve:{userStorage:"userStorage",jobService:"jobService",jobsViewed:function(e,t){var o=e.getUser();return t.jobId.query({jobList:JSON.stringify(o.jobsViewed)}).$promise},jobsMarked:function(e,t){var o=e.getUser();return t.jobId.query({jobList:JSON.stringify(o.jobsMarked)}).$promise},jobsApplied:function(e,t){var o=e.getUser();return t.jobId.query({jobList:JSON.stringify(o.jobsApplied)}).$promise},jobsPosted:function(e,t){var o=e.getUser();return t.jobId.query({jobList:JSON.stringify(o.jobsPosted)}).$promise}}}).state("userProfile.jobsViewed",{url:"/jobsViewed",templateUrl:"/app/views/userProfileJobsViewed.html"}).state("userProfile.jobsMarked",{url:"/jobsMarked",templateUrl:"/app/views/userProfileJobsMarked.html"}).state("userProfile.jobsApplied",{url:"/jobsApplied",templateUrl:"/app/views/userProfileJobsApplied.html"}),o.google({clientId:"339049144467-oukcl6dsgubkqmb5toc2khe73h0r5vml.apps.googleusercontent.com",url:"api/auth/google"}),o.facebook({clientId:"955330687857756",url:"api/auth/facebook"}),o.loginUrl="/api/login",o.signupUrl="/api/register"}])}(),function(){"use strict";angular.module("jobFinder.app").controller("confirmModalCtrl",["$scope","$uibModalInstance","config",function(e,t,o){e.modalTitle=o.modalTitle,e.title=o.title,e.company=o.company,e.yes=function(){t.close({id:o.id})},e.cancel=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("jobFinder.app").controller("HeaderCtrl",["$scope","$auth",function(e,t){e.isAuthenticated=t.isAuthenticated}])}(),function(){"use strict";angular.module("jobFinder.app").controller("JobModalCtrl",["$scope","$uibModalInstance","config",function(e,t,o){e.modalTitle=o.modalTitle,e.buttonType=o.buttonType,e.isEditable=o.isEditable,e.hasApplied=o.hasApplied,e.title=o.title,e.company=o.company,e.description=o.description,e.submit=function(){t.close({_id:o.id,title:e.title,company:e.company,description:e.description,type:e.buttonType,views:o.views,applicants:o.applicants,candidates:o.candidates})},e.cancel=function(){t.dismiss("cancel")}}])}(),function(){"use strict";angular.module("jobFinder.app").controller("JobsCtrl",["$scope","jobService","userService","alertService","$rootScope","dataTransfer","$state","$uibModal","jobModalService","applyForJobService","userStorage","jobs","paginateJobsService","_",function(e,t,o,i,a,n,r,s,c,l,d,u,p,b){function g(){t.title.query({title:e.jobToSearch}).$promise.then(function(t){f=p.paginateJobs(e,t),m()},function(e){i("warning","Unable to get jobs: ",e.data.message,"job-alert")})}function m(){j?$.each(e.jobs,function(e,t){b.contains(j.jobsMarked,t._id)?t.marked=!0:t.marked=!1,b.contains(j.jobsApplied,t._id)?t.applied=!0:t.applied=!1}):$.each(e.jobs,function(e,t){t.marked=!1,t.applied=!1})}a.bodyStyle="",e.jobToSearch=n.getJob();var f;e.$watch("jobToSearch",function(e,t){e!==t&&g()}),0===u.length?i("warning","Opps! ","No job found","job-alert"):f=p.paginateJobs(e,u);var j=d.getUser();m(),e.pageChanged=function(){if(f&&f.length>10)t=(e.currentPage-1)*e.itemsPerPage,o=t+e.itemsPerPage,e.jobs=f.slice(t,o);else{var t=(e.currentPage-1)*e.itemsPerPage,o=t+e.itemsPerPage;e.jobs=e.allJobs.slice(t,o)}},e.viewJob=function(a){e.id=a._id,e.title=a.title,e.company=a.company,e.description=a.description,e.views=a.views,e.applicants=a.applicants,e.candidates=a.candidates,a.views++,t.jobId.update({id:e.id},a).$promise.then(function(e){}).catch(function(t){a.views-=1,i("warning","Opps! ","Error increasing the job view for : "+e.title,"job-alert")});var n=d.getUser();n&&n.jobsViewed.indexOf(e.id)===-1&&(n.jobsViewed.push(e.id),o.update({id:n._id},n).$promise.then(function(e){d.setUser(e)}).catch(function(t){i("warning","Opps! ","Error adding: "+e.title+" to jobs viewed","job-alert")}))},e.openModal=function(t){var o=d.getUser();"VIEW"===t&&o&&(e.hasApplied=o&&e.candidates.indexOf(o._id)!==-1),c.open(t,e)},e.markJob=function(e){var t=d.getUser();if(t){var a=t.jobsMarked.indexOf(e._id);a===-1?(t.jobsMarked.push(e._id),o.update({id:t._id},t).$promise.then(function(t){d.setUser(t),i("success","You succesfully bookmarked: ",e.title,"job-alert")}).catch(function(t){i("warning","Opps! ","Error adding: "+e.title+" to bookmarked","job-alert")})):(t.jobsMarked.splice(a,1),o.update({id:t._id},t).$promise.then(function(t){d.setUser(t),i("success","You succesfully un-bookmarked: ",e.title,"job-alert")}).catch(function(t){i("warning","Opps! ","Error adding: "+e.title+" to bookmarked","job-alert")}))}else r.go("login"),i("warning","Opps! ","To bookmark a job, you need to sign in first","main-alert")},e.applyJob=function(e){l.apply(e)},e.refresh=function(){t.title.query({}).$promise.then(function(t){0===t.length?i("warning","Opps! ","No job found","job-alert"):(e.jobToSearch="",p.paginateJobs(e,t),m())}).catch(function(e){i("warning","Unable to get jobs: "+e,"job-alert")})},e.searchJob=g}])}(),function(){"use strict";angular.module("jobFinder.app").controller("LoginCtrl",["$rootScope","$scope","alertService","$state","$auth","userStorage",function(e,t,o,i,a,n){function r(e){o("warning","Something went wrong :( ",e.data.message,"main-alert")}e.bodyStyle="mainPage",t.login=function(){a.login({email:t.email,password:t.password}).then(function(e){i.go("main"),n.setUser(e.data.user);var t="Thanks for coming back!",a=e.data.user.displayName?e.data.user.displayName:e.data.user.email;e.data.user.active||(t="Just a reminder, please active your account soon :)"),o("success","Welcome ",a+"! "+t,"main-alert")}).catch(r)},t.authenticate=function(e){a.authenticate(e).then(function(e){i.go("main"),n.setUser(e.data.user);var t="Thanks for coming back!";e.data.user.active||(t="Just a reminder, please active your account soon :)"),o("success","Welcome ",e.data.user.displayName+"! "+t,"main-alert")},r)}}])}(),function(){"use strict";angular.module("jobFinder.app").controller("LogoutCtrl",["$auth","$state","userStorage",function(e,t,o){e.logout(),o.removeUser(),t.go("main")}])}(),function(){"use strict";angular.module("jobFinder.app").controller("MainCtrl",["$rootScope","$scope","$state","dataTransfer",function(e,t,o,i){e.bodyStyle="mainPage",t.keyPressed=function(e){13===e.charCode&&t.searchJob()},t.searchJob=function(){i.addJob(t.jobToSearch),o.go("jobs")}}])}(),function(){"use strict";function e(e,t,o,i,a,n,r,s,c,l,d,u,p,b,g,m){var f=this,j=d.getUser(),v=j.email.substring(0,j.email.indexOf("@"));t.bodyStyle="",f.email=j.email,f.displayName=j.displayName?j.displayName:v,f.status=j.active?"activated":"unactivated",f.avatar_url=j.avatar_url,f.jobPostedPerPage=10,f.currentPageJobPosted=1,f.currentPage=1,f.itemsPerPage=11,f.numOfPosted=g.length,f.jobsViewed=u,f.jobsApplied=b,f.jobsMarked=p,f.jobsPosted=g,m.paginatePosted(f,g);var h=l.current.url.substring(1);switch(h){case"jobsViewed":m.paginateViewed(f,u);break;case"jobsMarked":m.paginateMarked(f,p);break;case"jobsApplied":m.paginateApplied(f,b);break;default:m.paginateViewed(f,u)}f.pageChanged=function(){var e,t;switch(h){case"jobsViewed":u.length>11&&(e=(f.currentPage-1)*f.itemsPerPage,t=e+f.itemsPerPage,f.jobsViewed=u.slice(e,t));break;case"jobsMarked":p.length>11&&(e=(f.currentPage-1)*f.itemsPerPage,t=e+f.itemsPerPage,f.jobsMarked=p.slice(e,t));break;case"jobsApplied":b.length>11&&(e=(f.currentPage-1)*f.itemsPerPage,t=e+f.itemsPerPage,f.jobsApplied=b.slice(e,t))}},t.$on("$stateChangeStart",function(e,t,o,i,a){var n=t.url.substring(1);switch(n){case"jobsViewed":f.numOfJob=u.length,m.paginateViewed(f,u);break;case"jobsMarked":f.numOfJob=p.length,m.paginateMarked(f,p);break;case"jobsApplied":f.numOfJob=b.length,m.paginateApplied(f,b)}}),f.jobPostedPageChanged=function(){if(g.length>11){var e=(f.currentPageJobPosted-1)*f.jobPostedPerPage,t=e+f.jobPostedPerPage;f.jobsPosted=g.slice(e,t)}},f.viewJob=function(e){f.id=e._id,f.title=e.title,f.company=e.company,f.description=e.description,f.views=e.views,f.applicants=e.applicants,f.candidates=e.candidates,e.views++,i.jobId.update({id:f.id},e).$promise.then(function(e){console.log("success")}).catch(function(t){e.views-=1,a("warning","Opps! ","Error increasing the job view for : "+f.title,"job-alert")});var t=d.getUser();t&&t.jobsViewed.indexOf(f.id)===-1&&(t.jobsViewed.push(f.id),n.update({id:t._id},t).$promise.then(function(e){d.setUser(e)}).catch(function(e){a("warning","Opps! ","Error adding: "+f.title+" to jobs viewed","job-alert")}))},f.clearJobMarked=function(){var e=d.getUser();e&&e.jobsMarked.length>0&&(e.jobsMarked.splice(0,e.jobsMarked.length),n.update({id:e._id},e).$promise.then(function(e){f.jobsMarked.splice(0,f.jobsMarked.length),f.numOfJob=0,p.splice(0,p.length),d.setUser(e)}).catch(function(e){a("warning","Opps! ","Error clearing all jobs marked: "+e.message,"job-alert")}))},f.clearJobViewed=function(){var e=d.getUser();e&&e.jobsViewed.length>0&&(e.jobsViewed.splice(0,e.jobsViewed.length),n.update({id:e._id},e).$promise.then(function(e){f.jobsViewed.splice(0,f.jobsViewed.length),f.numOfJob=0,u.splice(0,u.length),d.setUser(e)}).catch(function(e){a("warning","Opps! ","Error clearing all jobs viewed: "+e.message,"job-alert")}))},f.deleteJob=function(e){f.id=e._id,f.title=e.title,f.company=e.company},f.editJob=function(e){f.id=e._id,f.title=e.title,f.company=e.company,f.description=e.description},f.openModal=function(e){var t=d.getUser();if(t)switch(e){case"VIEW":f.hasApplied=t&&f.candidates.indexOf(t._id)!==-1,r.open(e,f);break;case"POST":r.open(e,f);break;case"EDIT":r.open(e,f);break;case"CONFIRM":s.open(e,f);break;case"USER":c.open(e,f)}},f.keyPressed=function(e){13===e.charCode&&f.searchJob()},f.searchJob=function(){o.addJob(f.jobToSearch),l.go("jobs")}}angular.module("jobFinder.app").controller("ProfileCtrl",["$scope","$rootScope","dataTransfer","jobService","alertService","userService","jobModalService","confirmModalService","userModalService","$state","userStorage","jobsViewed","jobsMarked","jobsApplied","jobsPosted","paginateJobsService",e])}(),function(){"use strict";angular.module("jobFinder.app").controller("RegisterCtrl",["$rootScope","$scope","alertService","$auth","$state","userStorage",function(e,t,o,i,a,n){function r(e){o("warning","Something went wrong :( ",e.data.message,"main-alert")}e.bodyStyle="mainPage",t.submitRegistration=function(){i.signup({email:t.email,password:t.password}).then(function(e){a.go("main"),i.setToken(e.data.token),n.setUser(e.data.user),o("success","Account Created! ","Welcome, "+e.data.user.email+" Just a reminder, please active your account soon :)","main-alert")}).catch(function(e){o("warning","Opps! ","Could not register: "+e.data.message,"main-alert")})},t.authenticate=function(e){i.authenticate(e).then(function(e){a.go("main"),n.setUser(e.data.user);var t="Thanks for coming back!";e.data.user.active||(t="Just a reminder, please active your account soon :)"),o("success","Welcome ",e.data.user.displayName+"! "+t,"main-alert")},r)}}])}(),function(){"use strict";angular.module("jobFinder.app").controller("userModalCtrl",["$scope","$uibModalInstance","user",function(e,t,o){e.modalTitle="User Profile",e.email=o.email,e.username=o.name,e.avatar_url=o.avatar_url,e.buttonType="UPDATE",e.update=function(){t.close({email:e.email,displayName:e.username,avatar_url:e.avatar_url})},e.cancel=function(){t.dismiss("cancel")}}])}(),function(){angular.module("jobFinder.app").directive("akModal",function(){return{restrict:"A",link:function(e,t,o){e.$watch(o.akModal,function(e){e?t.modal("show"):t.modal("hide")})}}})}(),function(){"use strict";angular.module("jobFinder.app").directive("validateEquals",function(){return{require:"ngModel",link:function(e,t,o,i){function a(t){var a=t===e.$eval(o.validateEquals);return i.$setValidity("equal",a),a?t:void 0}i.$parsers.push(a),i.$formatters.push(a),e.$watch(o.validateEquals,function(){i.$setViewValue(i.$viewValue)})}}})}(),function(){"use strict";angular.module("common.service",["ngResource"])}(),function(){"use strict";angular.module("common.service").service("applyForJobService",["userStorage","userService","alertService","$state","jobService",function(e,t,o,i,a){function n(e){e.applicants++,a.jobId.update({id:e._id},e).$promise.then(function(e){console.log("success")},function(t){o("warning","Opps! ","Applying for job "+e.title+" failed!","job-alert")})}this.apply=function(r){var s=e.getUser();if(s){if(r.candidates.indexOf(s._id)!==-1)return void o("warning","Opps! ","You already have applied for: "+r.title,"job-alert");if(r.candidates.push(s._id),a.jobId.update({id:r._id},r).$promise.then(function(e){console.log("success")},function(e){o("warning","Opps! ","Applying for job "+r.title+" failed!","job-alert")}),s.jobsApplied.indexOf(r._id)!==-1)return void o("warning","Opps! ","You already have applied for: "+r.title,"job-alert");s.jobsApplied.push(r._id),t.update({id:s._id},s).$promise.then(function(t){e.setUser(t),o("success","You succesfully applied for: ",r.title,"job-alert")}).catch(function(e){o("warning","Opps! ","Error adding: "+r.title+" to jobs applied","job-alert")}),n(r)}else i.go("login"),o("warning","Opps! ","To apply for a job, you need to sign in first","main-alert")}}])}(),function(){"use strict";angular.module("common.service").service("deleteJobService",["userStorage","alertService","$state","jobService","userService","paginateJobsService",function(e,t,o,i,a,n){this.delete=function(n,r){var s,c=e.getUser();c?i.jobId.delete({id:n.id}).$promise.then(function(o){r.jobsViewed=$.grep(r.jobsViewed,function(e){return e._id!=o._id}),r.jobsMarked=$.grep(r.jobsMarked,function(e){return e._id!=o._id}),r.jobsPosted=$.grep(r.jobsPosted,function(e){return e._id!=o._id}),r.jobsApplied=$.grep(r.jobsApplied,function(e){return e._id!=o._id}),c.jobsViewed.indexOf(o._id)!==-1&&(s=c.jobsViewed.indexOf(o._id),c.jobsViewed.splice(s,1)),c.jobsMarked.indexOf(o._id)!==-1&&(s=c.jobsMarked.indexOf(o._id),c.jobsMarked.splice(s,1)),c.jobsPosted.indexOf(o._id)!==-1&&(s=c.jobsPosted.indexOf(o._id),c.jobsPosted.splice(s,1)),c.jobsApplied.indexOf(o._id)!==-1&&(s=c.jobsApplied.indexOf(o._id),c.jobsApplied.splice(s,1)),a.update({id:c._id},c).$promise.then(function(i){e.setUser(i),t("success","You successfully deleted the job: ",o.title,"job-alert")}).catch(function(e){t("warning","Opps! ","Error adding: "+n.title+" to bookmarked","job-alert")})}).catch(function(e){t("warning","Opps! ","Failed to delete job: "+n.title,"job-alert")}):(o.go("login"),t("warning","Opps! ","To edit a job, you need to sign in first","main-alert"))}}])}(),function(){"use strict";angular.module("common.service").service("editJobService",["userStorage","alertService","$state","jobService",function(e,t,o,i){this.edit=function(a,n){var r=e.getUser();r?i.jobId.update({id:a._id},a).$promise.then(function(e){$.each(n.jobsViewed,function(t,o){o._id===e._id&&(o.title=e.title,o.company=e.company,o.description=e.description)}),$.each(n.jobsMarked,function(t,o){o._id===e._id&&(o.title=e.title,o.company=e.company,o.description=e.description)}),$.each(n.jobsApplied,function(t,o){o._id===e._id&&(o.title=e.title,o.company=e.company,o.description=e.description)}),$.each(n.jobsPosted,function(t,o){o._id===e._id&&(o.title=e.title,o.company=e.company,o.description=e.description)}),t("success","You successfully updated the job: ",e.title,"main-alert")}).catch(function(e){t("warning","Opps! ","Failed to edit job: "+a.title,"main-alert")}):(o.go("login"),t("warning","Opps! ","To edit a job, you need to sign in first","main-alert"))}}])}(),function(){"use strict";angular.module("common.service").service("postJobService",["userStorage","userService","alertService","$state","jobService","paginateJobsService",function(e,t,o,i,a,n){this.post=function(r,s){var c=e.getUser();c?a.title.save(r).$promise.then(function(a){"/jobs"===i.current.url?(s.jobs=s.allJobs,s.jobs.push(a),n.paginateJobs(s,s.jobs)):i.go("jobs"),c.jobsPosted.push(a._id),t.update({id:c._id},c).$promise.then(function(t){e.setUser(t),o("success","You succesfully post job: ",r.title,"job-alert")}).catch(function(e){o("warning","Opps!","Error updating user with: "+r.title+" to jobs posted","job-alert")})},function(e){o("warning","Error: ","Job saving failed","job-alert")}):(i.go("login"),o("warning","Opps! ","To apply for a job, you need to sign in first","main-alert"))}}])}(),function(){"use strict";angular.module("common.service").service("alertService",["$rootScope","$timeout",function(e,t){var o;return function(i,a,n,r,s){e.alert={hasBeenShown:!0,show:!0,type:i,style:r,message:n,title:a},t.cancel(o),o=t(function(){e.alert.show=!1},s||4e3)}}])}(),function(){"use strict";angular.module("common.service").factory("dataTransfer",function(){var e,t=function(t){e=t},o=function(){return e},i=function(){e=""};return{addJob:t,getJob:o,clearJob:i}})}(),function(){"use strict";angular.module("common.service").service("paginateJobsService",function(e){this.paginateJobs=function(t,o){t.allJobs=o,t.numOfJob=o.length,t.currentPage=1,t.itemsPerPage=12;var i,a,n;return t.jobToSearch?(e.clearJob(),n=$.grep(t.allJobs,function(e){return e.title.toLowerCase().indexOf(t.jobToSearch.toLowerCase())!==-1}),t.numOfJob=n.length,n.length>10?(i=(t.currentPage-1)*t.itemsPerPage,a=i+t.itemsPerPage,t.jobs=n.slice(i,a)):t.jobs=n):(t.jobs=t.allJobs,t.jobs.length>10&&(i=(t.currentPage-1)*t.itemsPerPage,a=i+t.itemsPerPage,t.jobs=t.allJobs.slice(i,a))),n},this.paginateViewed=function(e,t){if(e.jobsViewed=t,e.numOfJob=t.length,e.numOfJob>11){var o=(e.currentPage-1)*e.itemsPerPage,i=o+e.itemsPerPage;e.jobsViewed=t.slice(o,i)}},this.paginateMarked=function(e,t){if(e.jobsMarked=t,e.numOfJob=t.length,e.numOfJob>11){var o=(e.currentPage-1)*e.itemsPerPage,i=o+e.itemsPerPage;e.jobsMarked=t.slice(o,i)}},this.paginateApplied=function(e,t){if(e.jobsApplied=t,e.numOfJob=t.length,e.numOfJob>11){var o=(e.currentPage-1)*e.itemsPerPage,i=o+e.itemsPerPage;e.jobsApplied=t.slice(o,i)}},this.paginatePosted=function(e,t){if(e.numOfJobPosted=t.length,e.jobsPosted=t,e.numOfJobPosted>10){var o=(e.currentPageJobPosted-1)*e.jobPostedPerPage,i=o+e.jobPostedPerPage;e.jobsPosted=t.slice(o,i)}}})}(),function(){"use strict";angular.module("common.service").factory("_",["$window",function(e){return e._}])}(),function(){"use strict";angular.module("common.service").factory("userStorage",["$window",function(e){var t,o=e.localStorage,i="currentUser",a={setUser:function(e){t=e,o.setItem(i,JSON.stringify(e))},getUser:function(){return t||(t=JSON.parse(o.getItem(i))),t},removeUser:function(){t=null,o.removeItem(i)}};return a}])}(),function(){"use strict";angular.module("common.service").service("confirmModalService",["$uibModal","$auth","alertService","$state","deleteJobService",function(e,t,o,i,a){this.open=function(n,r){var s=e.open({animation:!0,templateUrl:"/app/views/confirmModal.html",controller:"confirmModalCtrl",size:"md",backdrop:"static",keyboard:!1,windowClass:"custom-modal",openedClass:"always-scroll",resolve:{config:{id:r.id,title:r.title,company:r.company,modalTitle:"Confirmation"}}});s.result.then(function(e){t.isAuthenticated()?a.delete(e,r):(i.go("login"),o("warning","Opps! ","To delete a job, you need to sign in first","main-alert"))},function(){console.log("Modal dismissed at: "+new Date)})}}])}(),function(){"use strict";angular.module("common.service").service("jobModalService",["$uibModal","$auth","jobService","alertService","$state","applyForJobService","postJobService","deleteJobService","editJobService",function(e,t,o,i,a,n,r,s,c){function l(e,t){switch(e){case"POST":return{modalTitle:"Post a Job",isEditable:!0,buttonType:"SUBMIT"};case"VIEW":return{id:t.id,title:t.title,company:t.company,description:t.description,views:t.views,applicants:t.applicants,modalTitle:"View Job",isEditable:!1,hasApplied:t.hasApplied,buttonType:t.hasApplied?"APPLIED":"APPLY",candidates:t.candidates};case"EDIT":return{id:t.id,title:t.title,company:t.company,description:t.description,modalTitle:"Edit Job",isEditable:!0,buttonType:"SAVE"}}}this.open=function(o,s){var d=e.open({animation:!0,templateUrl:"/app/views/jobModal.html",controller:"JobModalCtrl",size:"md",backdrop:"static",keyboard:!1,windowClass:"custom-modal",openedClass:"always-scroll",resolve:{config:function(){return l(o,s)}}});d.result.then(function(e){switch(e.type){case"SUBMIT":t.isAuthenticated()?r.post(e,s):(a.go("login"),i("warning","Opps! ","To post a job, you need to sign in first","main-alert"));break;case"APPLY":t.isAuthenticated()?n.apply(e):(a.go("login"),i("warning","Opps! ","To apply for a job, you need to sign in first","main-alert"));break;case"SAVE":t.isAuthenticated()?c.edit(e,s):(a.go("login"),i("warning","Opps! ","To edit a job, you need to sign in first","main-alert"))}},function(){console.log("Modal dismissed at: "+new Date)})}}])}(),function(){"use strict";angular.module("common.service").service("userModalService",["$uibModal","$auth","userService","$state","alertService","userStorage",function(e,t,o,i,a,n){this.open=function(r,s){var c=e.open({animation:!0,templateUrl:"/app/views/userModal.html",controller:"userModalCtrl",size:"md",backdrop:"static",keyboard:!1,windowClass:"custom-modal",openedClass:"always-scroll",resolve:{user:{email:s.email,name:s.displayName,avatar_url:s.avatar_url}}});c.result.then(function(e){var r=n.getUser();t.isAuthenticated()?o.update({id:r._id},e).$promise.then(function(e){n.setUser(e),s.displayName=e.displayName,s.avatar_url=e.avatar_url,$("#avatar").attr("src",e.avatar_url),a("success","You succesfully edited your profile!","","job-alert")}).catch(function(e){a("warning","Opps!","Error editing your profile: ",e.message,"job-alert")}):(i.go("login"),a("warning","Opps! ","To delete a job, you need to sign in first","main-alert"))},function(){console.log("Modal dismissed at: "+new Date)})}}])}(),function(){"use strict";angular.module("common.service").factory("jobService",["$resource",function(e){return{title:e("/api/jobs/:title",{},{}),jobId:e("/api/jobById/:id",{},{update:{method:"PUT"}})}}])}(),function(){"use strict";angular.module("common.service").factory("userService",["$resource",function(e){return e("/api/users/:id",null,{update:{method:"PUT"}})}])}();